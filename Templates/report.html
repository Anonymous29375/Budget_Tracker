<!DOCTYPE html>
<html>
<head>
    <title>Budget Report</title>
    <!-- Link to CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container center">
        <!-- Page title showing which file was used -->
        <h1>Spending Summary for {{ file }}</h1>

        <!-- Summary totals -->
        <h2>Summary</h2>
        <ul class="summary-list">
            <li>Total Income: ${{ '%.2f'|format(data.total_income) }}</li>
            <li>Total Expenses: ${{ '%.2f'|format(data.total_expenses) }}</li>
            <li>Net Position: ${{ '%.2f'|format(data.net_position) }}</li>
        </ul>

        <!-- Spending chart -->
        {% if data.chart %}
        <h2>Spending by Category</h2>
        <img src="{{ url_for('static', filename='chart.png') }}" alt="Spending Chart" class="chart">
        {% endif %}

        <!-- All transactions in a table -->
        <h2>All Transactions</h2>
        <table class="center-table">
            <tr>
                <th>Date</th>
                <th>Merchant</th>
                <th>Category</th>
                <th>Amount ($)</th>
            </tr>
            <!-- Loop through every transaction and display -->
            {% for row in data.transactions %}
            <tr>
                <td>{{ row['Date'] }}</td>
                <td>{{ row['Merchant'] }}</td>
                <td>{{ row['Category'] }}</td>
                <td>{{ '%.2f'|format(row['Amount']) }}</td>
            </tr>
            {% endfor %}
        </table>

        <!-- Back button -->
        <br>
        <a href="{{ url_for('home') }}"><button>Back to Home</button></a>
    </div>
</body>
</html>
